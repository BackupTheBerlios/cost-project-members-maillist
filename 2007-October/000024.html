<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Cost-project-members] COST: SMAWL data from trawl surveys, acoustic surveys and commercial fisheries samplings
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/cost-project-members/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:cost-project-members%40lists.berlios.de?Subject=Re%3A%20%5BCost-project-members%5D%20COST%3A%20SMAWL%20data%20from%20trawl%20surveys%2C%0A%20acoustic%20surveys%20and%20commercial%20fisheries%20samplings&In-Reply-To=%3C470F3A22.2040404%40ipimar.pt%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000023.html">
   <LINK REL="Next"  HREF="000025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Cost-project-members] COST: SMAWL data from trawl surveys, acoustic surveys and commercial fisheries samplings</H1>
    <B>ernesto</B> 
    <A HREF="mailto:cost-project-members%40lists.berlios.de?Subject=Re%3A%20%5BCost-project-members%5D%20COST%3A%20SMAWL%20data%20from%20trawl%20surveys%2C%0A%20acoustic%20surveys%20and%20commercial%20fisheries%20samplings&In-Reply-To=%3C470F3A22.2040404%40ipimar.pt%3E"
       TITLE="[Cost-project-members] COST: SMAWL data from trawl surveys, acoustic surveys and commercial fisheries samplings">ernesto at ipimar.pt
       </A><BR>
    <I>Fri Oct 12 11:10:58 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000023.html">[Cost-project-members] COST: SMAWL data from trawl surveys,	acoustic surveys and commercial fisheries samplings
</A></li>
        <LI>Next message: <A HREF="000025.html">[Cost-project-members] Lisbon meeting.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24">[ date ]</a>
              <a href="thread.html#24">[ thread ]</a>
              <a href="subject.html#24">[ subject ]</a>
              <a href="author.html#24">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Teunis Jansen wrote:
&gt;<i>  
</I>&gt;<i>
</I>&gt;<i> -----Oprindelig meddelelse-----
</I>&gt;<i> Fra: ernesto [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-members">ernesto at ipimar.pt</A>] 
</I>&gt;<i> Sendt: 11. oktober 2007 18:16
</I>&gt;<i> Til: Teunis Jansen
</I>&gt;<i> Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-members">Cost-project-members at lists.berlios.de</A>
</I>&gt;<i> Emne: Re: [Cost-project-members] COST: SMAWL data from trawl surveys, acoustic surveys and commercial fisheries samplings
</I>&gt;<i>
</I>&gt;<i> Teunis Jansen wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> ________________________________
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Fra: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-members">cost-project-members-bounces at lists.berlios.de</A> 
</I>&gt;&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-members">cost-project-members-bounces at lists.berlios.de</A>] P&#229; vegne af 
</I>&gt;&gt;<i> Joel VIGNEAU
</I>&gt;&gt;<i> Sendt: 11. oktober 2007 16:32
</I>&gt;&gt;<i> Til: ernesto
</I>&gt;&gt;<i> Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/cost-project-members">Cost-project-members at lists.berlios.de</A>
</I>&gt;&gt;<i> Emne: Re: [Cost-project-members] COST: SMAWL data from trawl surveys, 
</I>&gt;&gt;<i> acoustic surveys and commercial fisheries samplings
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ernesto a &#233;crit : 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 	Joel VIGNEAU wrote: 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 		Hi all,
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		let me summarise the situation to see if we have the same 
</I>&gt;&gt;<i> understanding
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		What we agree : 
</I>&gt;&gt;<i> 		FF.CS + FF.AS + DATRAS make a complete and non-overlapping picture of all the fisheries information sampled. 
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		COST has based its structure on FF.CS but needs biological 
</I>&gt;&gt;<i> parameters from surveys (FF.AS, DATRAS, and others...)
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		The FF/COST DEF table CA now contains biological parameters from individual fish. 
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		What remains under discussion : 
</I>&gt;&gt;<i> 		There are still different options and even variants within the options proposed by Teunis. The option 2, which seems to gather the most advantages, makes a CA table in COST DEF independent of CS in the sense that we would not mandatorily request related information in HL. There is a variant of 3 different CA tables or a unique one. My preference goes to a unique one (I think there are not many differences). For opening to the future, we could add a field DATA_SOURCE (CS, AS, Surveys, ...). When the source is CS, we need to have a related information in HL, otherwise, for the moment there is no integrity check. 
</I>&gt;&gt;<i> 		If we go that way, do we have sufficient information in the CA table, especially concerning the time period when the source is not HL? 
</I>&gt;&gt;<i> 		The stratification issue 
</I>&gt;&gt;<i> 		I'm not surprised with your graph. The CC is a stratification based on individual weight, which according to the length/weight allometry correspond approximately to a stratification by length. In the small fish category, the mean length-at-age for every ages will be smaller than in the medium fish category, which all will be smaller than in the big fish category. The only way to get out of this, is to combine all the CC into a complete matrix and multiply by the real length proportion of the population, before doing any estimates. 
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		BR
</I>&gt;&gt;<i> 		
</I>&gt;&gt;<i> 		Joel
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 	Hi Joel,
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	I think your summary is correct but I'd like to elaborate a little bit more on CA tables. 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	This information comes from 3 different sources, (i) market sampling, (ii) on-board sampling and (iii) surveys, which differ in their aggregation level. Most aggregated is market sampling where area and time units are, at the most, rectangle and day. After we have on-board sampling where sometimes its possible to have coordinates and time in hour:minutes. The most disaggregated is survey data where we have coordinates and time. The information related with the individual is the same for all, although sometimes there are some missing observations (one may sample age and not maturity, etc). 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	Based on this rationale we may create a data structure that combines area, rectangle, coordinates, day, hour with data source (this is similar to sampling type so we may use that field): 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	sampType; area, rectangle, latIni, lonIni, latFin, lonFin, dateIni, 
</I>&gt;&gt;<i> dateFin, hourIni, hourFin, stock, spp, sex, etc (country, length, age, 
</I>&gt;&gt;<i> blah blah blah)
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	area, rectangle and dateFin would be mandatory so that market sampling can be included and the other fields would be filled based on sampType. A survey could provide everything lat, lon, hour, etc, while on-board sampling could provide some of this information. This way we could develop a data structure for individual biopars and link with CS using rectangle, date, spp etc. 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	My doubts are: 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	1) although biopars are independent from the fishery we know that the selectivity of the gear can bias the sampling, so I guess we should keep some information about the gear used to collect the sample; 
</I>&gt;&gt;<i> 	2) how far can we go with this and still keep compatibility with FF ? A change like this would require some adjustments to FF5 and FF5 exchange format. Are you whiling to do it ? Otherwise it makes no sense implementing only in COST and we should just keep it as it is now. 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	IMO if we go this path we should stop developing CA for now, discuss the data structure until we have an agreement and after implement FF5, FF5 exchange format and COST classes. In the mean time other packages could move on with length frequencies methods. 
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	Best
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	EJ
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i> 	
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Ernesto,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> it's sure we have a structural problem here that cannot be resolved at a glance. So let's not hurry to find out the best solution keeping a full convergence between COST and FF.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I agree with your approach (Sampling type will give us the source; area, rectangle and datefin are mandatory fields, ...) and concerning your doubts, the linkage between CA and HH should provide the gear information and its basic characteristics (when the source is commercial). I think we can live for the moment without this info for the surveys.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If we can fix this (Teunis and Henrik, is it Ok for you?), I think we can begin COST development with this structure. In parallel, we can continue the work with FF and come much later with a revision of the DEF. Anyway, the development and the beta-testing will bring other issues at the surface ....
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We will have to agree on the fact that from now on, and within the life of the project, we can only change the DEF once (so better be for good!).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> BR
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Joel
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  -----------------------------------------------------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi All
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> I am not sure exactly what to think is OK:-) I am uncertain about what in your mails refer to exchange formats and what refer to internal database structure in COST.
</I>&gt;&gt;<i> For now, lets focus on the exchange format (you might already be doing that - I was just in doubt). Remember that internal database structures can easily differ from the exch. format.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Seen from the FishFrame side, we can not go for a solution with SMAWL record in the exchange format that is shared between CS (Commercial fisheries sampling), AS (Acoustic survey) and TS (Trawl survey). The SMAWL record is however shared between on-board vessel sampling and market sampling, since both are in the CS format.
</I>&gt;&gt;<i> The main reason why this is not a solution we can implement in FF (exchange format), is that the data managers we know of, keep and handle their national data linked to the way they are sampled. Data from one survey is kept gathered and quality assured after the survey has finished. Then the surveys data is uploaded. Similarly with the commercial samplings. It is often separate people who are responsible for each type of sampling. So when it comes to uploading, correcting and approving datasets, then it is natural that this is done separately for CS (Commercial fisheries sampling), AS (Acoustic survey) and TS (Trawl survey). 
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> So it is option 2 for FF... I would also think that this would be the most long lasting solution for COST, especially seen in the light of the possibility of a COST 2 containing survey data. 
</I>&gt;&gt;<i> If you should decide in Lisbon to go for option 2 with COST as well and this requires modification / addition of single SMAWL fields, then we are ready to look into that.
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Best regards
</I>&gt;&gt;<i> Teunis
</I>&gt;&gt;<i>   
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Hi Teunis,
</I>&gt;<i>
</I>&gt;<i> I was talking about both, exchange format and database structure. R classes are trying to replicate the database structure so we need both to implement classes and io methods.
</I>&gt;<i>
</I>&gt;<i> I see the point of keeping the exchange format like it is with small adjustments but we'll need a different data structure for biopars. How do you deal with it in FF ? If you need to aggregate individual data from surveys and market sampling to build an ALK how do you do it now ?
</I>&gt;<i>
</I>&gt;<i> Best
</I>&gt;<i>
</I>&gt;<i> EJ
</I>&gt;<i>
</I>&gt;<i> ---------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Hi Ernesto
</I>&gt;<i>
</I>&gt;<i> In version 4.3 we only had ALKs from commercial market samplings and commercial sea samplings. These could be pooled. Giving the option of also adding survey single fish does not make any special difference.
</I>&gt;<i>
</I>&gt;<i> Tables in FF:
</I>&gt;<i> We have tables for the input data, they resemble the input format a lot (I mailed the structure of those tables earlier). 
</I>&gt;<i> Then we have special tables that are populated during raising, extrapolation and stock splitting. One of those tables contains the age-length-keys, another contains the standardized length distribution. These two are then joined to form the table with representative age-length distribution data, that also contains the mean weight at age and length. This table is used for many outputs and for raising to whole catch as well. It is the users choice that determines the calculation method, data source and stratification. All this is abstractions from the input data structure and exchange format structure.
</I>&gt;<i>
</I>&gt;<i> I hope that data on some of these &quot;steps&quot;, can be pulled out of the COST methods, so we can implement the COST code as the calculator inside FF. One important thing for us is that it is possible to calculate discard estimates in weight as a separate step. Then afterwards apply the biological information and get the total numbers and mean weight, mean length and numbers at age and/or length.
</I>&gt;<i>
</I>&gt;<i> As I understand you, then you will have classes in R instead of database tables. Does this perform and scale properly?
</I>&gt;<i>
</I>&gt;<i> BR
</I>&gt;<i> Teunis
</I>Hi Teunis,

I guess we simply need to make sure the CA tables in FF5 exchange format 
have the same structure for surveys and commercial sampling. If we agree 
that CA will have _only_ individual records it shouldn't be a problem to 
pool it together at a latter stage.

OOP classes are a kind of database in the sense that they implement a 
data structure and guarantee a set of characteristics for the data they 
store. So, yes COSTcore maps FF5 tables in R S4 classes.

WRT performance it really depend on your definition of speed :-) There's 
always the possibility of mapping COST classes in C++, run all the 
analysis in C++ and read back the results. That's what we do in FLR. My 
experience is that things work quite smoothly. In FLR I can perform a 
XSA bootstrap with 1000 replicates with a few lines of code in just a 
few seconds, without using C++ code. It will depend a lot on the methods 
implementation.

Best

EJ


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000023.html">[Cost-project-members] COST: SMAWL data from trawl surveys,	acoustic surveys and commercial fisheries samplings
</A></li>
	<LI>Next message: <A HREF="000025.html">[Cost-project-members] Lisbon meeting.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24">[ date ]</a>
              <a href="thread.html#24">[ thread ]</a>
              <a href="subject.html#24">[ subject ]</a>
              <a href="author.html#24">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/cost-project-members">More information about the Cost-project-members
mailing list</a><br>
</body></html>
